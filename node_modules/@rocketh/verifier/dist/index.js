import { loadDeployments } from 'rocketh';
import { submitSourcesToEtherscan } from './etherscan.js';
import { submitSourcesToSourcify } from './sourcify.js';
import { submitSourcesToBlockscout } from './blockscout.js';
export async function run(config, options) {
    const { deployments, chainId } = loadDeployments(config.deployments, config.network.name, false);
    if (Object.keys(deployments).length === 0) {
        console.log(`the network ${config.network.name} has zero deployments`);
        process.exit();
    }
    if (!chainId) {
        console.error(`the network ${config.network.name} has no chainId recorded`);
        process.exit(1);
    }
    if (options.verifier.type === 'etherscan') {
        await submitSourcesToEtherscan({
            chainId,
            deployments,
            networkName: config.network.name,
            deploymentNames: options.deploymentNames,
            minInterval: options.minInterval,
            logErrorOnFailure: options.logErrorOnFailure,
        }, options.verifier);
    }
    else if (options.verifier.type === 'sourcify') {
        await submitSourcesToSourcify({
            chainId,
            deployments,
            networkName: config.network.name,
            deploymentNames: options.deploymentNames,
            minInterval: options.minInterval,
            logErrorOnFailure: options.logErrorOnFailure,
        }, options.verifier);
    }
    else if (options.verifier.type === 'blockscout') {
        await submitSourcesToBlockscout({
            chainId,
            deployments,
            networkName: config.network.name,
            deploymentNames: options.deploymentNames,
            minInterval: options.minInterval,
            logErrorOnFailure: options.logErrorOnFailure,
        }, options.verifier);
    }
}
//# sourceMappingURL=index.js.map